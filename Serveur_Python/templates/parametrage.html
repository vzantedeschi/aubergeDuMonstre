{% extends "base.html" %}

{% block style %}

{% endblock %}

{% block body %}

{% include "header.html" %}
<div class="container">
	<div class="col-md-12" id="listeRegles">
		<button onclick="valider()" class="btn btn-default"><!-- teste avec un bouton pour afficher, on voitnmaintent le ok dans la console mais toujours erreur loadtemplate non def"-->
	
	</div>
</div>

<div class="text-center">
	<p>Copyright By H4213</p>
</div>
{% endblock body %}


{% block javascript %}
{% raw %}
<script src="static/js/parametrage.js"></script>
{% endraw %}
{% raw %}
<script id="reg-template" type="text/x-handlebars-template">
	<div class="panel panel-default text-center">
		<div class="panel-heading">
			<h3 class="panel-title">Règles actives</h3>
		</div>
		<form method="POST" action="/parametrage">
	        {{#each result}}
	        <li class="list-group-item">
		        <div class="row">
		        	<div class="checkbox">
		            	<label>
		            		<input type="checkbox"  name="regle" value="{{_id}}" />
			        			<div class="col-lg-6 text-center">{{condition}}</div>
			       				<div class="col-lg-6 text-center">{{action}}</div>
			       		</label>
			       	</div>
		        </div>
	        </li>
	        {{/each}}

	        <br>
	        <div class="col-lg-6">
	        	<input type="submit" name="supprimer" value="Supprimer" class="btn btn-default"/>Supprimer règles
	        </div>
	        <div class="col-lg-6">
	        	<input type="submit" name="ajouter" value="Ajouter" class="btn btn-default"/>Ajouter règle
	        </div>

        </form>
	</div>
</script>
{% endraw %}
{% raw %}
<script>
function valider() {
	var $regles = $("#listeRegles");
	console.log("ok") 
	$regles.html("");
	$.getJSON('/parametrage/chargerRegles', {}, function(data) {
		console.log(data);
		$regles.append(regTemplate(data));
	});
}
</script>
{% endraw %}
{% endblock %}

