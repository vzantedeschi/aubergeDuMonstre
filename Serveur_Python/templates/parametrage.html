{% extends "base.html" %}

{% block style %}

{% endblock %}

{% block body %}

{% include "header.html" %}
<div class="container">
	<div class="col-md-12" id="listeRegles">
		<button onClick="valider()" class="btn btn-default"/><!-- teste avec un bouton pour afficher, on voitnmaintent le ok dans la console mais toujours erreur loadtemplate non def"-->
		
	</div>
</div>

<div class="text-center">
	<p>Copyright By H4213</p>
</div>
{% endblock body %}


{% block javascript %}

{% raw %}
<script id="reg-template" type="text/x-handlebars-template">
	
		
	        
	        <li class="list-group-item">
		        <div class="row">
		        	<div class="checkbox">
		            	<label>
		            		<input id="reg_id" class="col-lg-2" type="checkbox"  name="regle" value="" />
			        			<div class="col-lg-4 text-center">
			        			{{#each conditions}}
			        				{{nom}}
			        			{{/each}}
			        			</div>
			       				<div class="col-lg-4 text-center">
			       				{{#each actions}}
			       					{{description}}
			       				{{/each}}
			       				</div>
			       		</label>
			       	</div>
		        </div>
	        </li> 
	        
		</div>

	        <div class="col-lg-6 text-center">
	        	<input type="submit" onClick="" name="supprimer" value="Supprimer regles" class="btn btn-default"/>
	        </div>
	        <div class="col-lg-6 text-center">
	        	<input type="submit" onClick="" name="ajouter" value="Ajouter regle" class="btn btn-default"/>
	        </div>

    </form>
	
</script>
{% endraw %}

<script>
function valider() {
	var $regles = $("#listeRegles");
	var i=0;
	console.log("ok") 
	$regles.html("<form method=\"POST\" action=\"/parametrage\"><div class=\"panel panel-default text-center\"><div class=\"panel-heading\"><h3 class=\"panel-title\">RÃ¨gles actives</h3></div>");
	$.getJSON('/parametrage/chargerRegles', {}, function(data) {
		for(i=0; i<data.result.length; i++){
			var id_regle = data.result[i].regle_id;
			$("reg_id").val(id_regle);
			$.getJSON('parametrage/ActCond/' + id_regle, {}, function(donnee) {
				console.log(donnee);
				$regles.append(regTemplate(donnee));
			});
		}
	});
}
</script>


<script src="static/js/parametrage.js"></script>


{% endblock %}

